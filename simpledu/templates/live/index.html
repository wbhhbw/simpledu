{% extends "base.html" %}

{% block title %}Live{% endblock %}


{% block body %}
<div class="row">
	<div>
		<span>{{ live.name }} - {{ live.user.username }}</span>
	</div>
  <div class="col-md-9">
  	<video id="videoElement" width="100%" height="500px" controls="controls"></video>
  </div>
  <div class="col-md-3">
  </div>
</div>
{% endblock %}

{% block tail_js %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js"></script>
<script>
if (flvjs.isSupported()){
	//获取 video标签
	var videoElement = document.getElementById('videoElement');
	//初始化播放器
	var flvPlayer = flvjs.createPlayer({
		//流的类型
		type: 'flv',
		//是否是直播
		isLive: true,
		//直播流地址
		url:'https://dl.live-play.acgvideo.com/live-dl/799477/live_8192168_5923385.flv?wsSecret=fcfef8bb7ec060a24dd76e642e1a682e&wsTime=1515037793'
	});
	flvPlayer.attachMediaElement(videoElement);
	flvPlayer.load();
	//播放直播
	flvPlayer.play();
}
</script>
{% endblock %}